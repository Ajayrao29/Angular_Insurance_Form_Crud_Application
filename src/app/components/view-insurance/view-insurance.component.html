<div class="container-fluid mt-5">
  <div class="row">
    <div class="col-12">
      <!-- Header -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">Insurance Records</h2>
        <a href="/add" class="btn btn-primary">
          <i class="bi bi-plus-circle"></i> Add New Insurance
        </a>
      </div>

      <!-- Success Message -->
      <div *ngIf="deleteMessage" class="alert alert-success alert-dismissible fade show" role="alert">
        {{ deleteMessage }}
        <button type="button" class="btn-close" (click)="deleteMessage = ''"></button>
      </div>

      <!-- Error Message -->
      <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ errorMessage }}
        <button type="button" class="btn-close" (click)="errorMessage = ''"></button>
      </div>

      <!-- Loading State -->
      <div *ngIf="loading" class="text-center">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-3">Loading insurances...</p>
      </div>

      <!-- No Records -->
      <div *ngIf="!loading && insurances.length === 0" class="alert alert-info text-center">
        <h5>No insurance records found</h5>
        <p>Click the button above to add a new insurance.</p>
      </div>

      <!-- Table -->
      <div *ngIf="!loading && insurances.length > 0" class="table-responsive card shadow">
        <table class="table table-hover mb-0">
          <thead class="table-primary">
            <tr>
              <th>ID</th>
              <th>Policy Number</th>
              <th>Holder Name</th>
              <th>Policy Type</th>
              <th>Premium</th>
              <th>Start Date</th>
              <th>End Date</th>
              <th>Nominee</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let insurance of insurances" [ngClass]="{'table-light': insurance.status === 'Inactive'}">
              <td><strong>{{ insurance.id }}</strong></td>
              <td><strong class="text-primary">{{ insurance.policyNumber }}</strong></td>
              <td>{{ insurance.holderName }}</td>
              <td>{{ insurance.policyType }}</td>
              <td>â‚¹{{ insurance.premium.toFixed(2) }}</td>
              <td>{{ formatDate(insurance.startDate) }}</td>
              <td>{{ formatDate(insurance.endDate) }}</td>
              <td>{{ insurance.nominee }}</td>
              <td>
                <span class="badge" [ngClass]="getStatusBadgeClass(insurance.status)">
                  {{ insurance.status }}
                </span>
              </td>
              <td>
                <div class="btn-group btn-group-sm" role="group">
                  <a [routerLink]="['/update', insurance.id]" class="btn btn-warning btn-sm" title="Edit">
                    <i class="bi bi-pencil-square"></i> Edit
                  </a>
                  <button
                    type="button"
                    class="btn btn-danger btn-sm"
                    (click)="deleteInsurance(insurance.id)"
                    title="Delete">
                    <i class="bi bi-trash"></i> Delete
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
